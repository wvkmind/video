{
  "name": "img2img_reference",
  "displayName": "图生图（参考帧衔接）",
  "type": "text_to_image",
  "isActive": true,
  "workflowJSON": {
    "1": {
      "class_type": "CheckpointLoaderSimple",
      "inputs": {
        "ckpt_name": "sd_xl_base_1.0.safetensors"
      }
    },
    "2": {
      "class_type": "LoadImage",
      "inputs": {
        "image": "{{reference_image}}"
      }
    },
    "3": {
      "class_type": "VAEEncode",
      "inputs": {
        "pixels": ["2", 0],
        "vae": ["1", 2]
      }
    },
    "4": {
      "class_type": "CLIPTextEncode",
      "inputs": {
        "text": "{{prompt}}",
        "clip": ["1", 1]
      }
    },
    "5": {
      "class_type": "CLIPTextEncode",
      "inputs": {
        "text": "{{negative_prompt}}",
        "clip": ["1", 1]
      }
    },
    "6": {
      "class_type": "KSampler",
      "inputs": {
        "seed": "{{seed}}",
        "steps": "{{steps}}",
        "cfg": "{{cfg}}",
        "sampler_name": "{{sampler}}",
        "scheduler": "normal",
        "denoise": "{{denoise}}",
        "model": ["1", 0],
        "positive": ["4", 0],
        "negative": ["5", 0],
        "latent_image": ["3", 0]
      }
    },
    "7": {
      "class_type": "VAEDecode",
      "inputs": {
        "samples": ["6", 0],
        "vae": ["1", 2]
      }
    },
    "8": {
      "class_type": "SaveImage",
      "inputs": {
        "filename_prefix": "keyframe_ref",
        "images": ["7", 0]
      }
    }
  },
  "parameters": [
    {
      "name": "reference_image",
      "displayName": "参考图片",
      "type": "string",
      "defaultValue": "",
      "nodeId": "2",
      "fieldPath": "inputs.image"
    },
    {
      "name": "prompt",
      "displayName": "正向提示词",
      "type": "string",
      "defaultValue": "",
      "nodeId": "4",
      "fieldPath": "inputs.text"
    },
    {
      "name": "negative_prompt",
      "displayName": "负向提示词",
      "type": "string",
      "defaultValue": "blurry, low quality, distorted, ugly",
      "nodeId": "5",
      "fieldPath": "inputs.text"
    },
    {
      "name": "steps",
      "displayName": "采样步数",
      "type": "number",
      "defaultValue": 30,
      "min": 1,
      "max": 150,
      "step": 1,
      "nodeId": "6",
      "fieldPath": "inputs.steps"
    },
    {
      "name": "cfg",
      "displayName": "CFG Scale",
      "type": "number",
      "defaultValue": 7.5,
      "min": 1.0,
      "max": 20.0,
      "step": 0.5,
      "nodeId": "6",
      "fieldPath": "inputs.cfg"
    },
    {
      "name": "denoise",
      "displayName": "重绘幅度",
      "type": "number",
      "defaultValue": 0.7,
      "min": 0.0,
      "max": 1.0,
      "step": 0.05,
      "nodeId": "6",
      "fieldPath": "inputs.denoise"
    },
    {
      "name": "sampler",
      "displayName": "采样器",
      "type": "select",
      "defaultValue": "dpmpp_2m",
      "options": [
        "euler",
        "euler_ancestral",
        "heun",
        "dpm_2",
        "dpm_2_ancestral",
        "lms",
        "dpmpp_2s_ancestral",
        "dpmpp_2m",
        "dpmpp_sde",
        "ddim"
      ],
      "nodeId": "6",
      "fieldPath": "inputs.sampler_name"
    },
    {
      "name": "seed",
      "displayName": "随机种子",
      "type": "number",
      "defaultValue": -1,
      "min": -1,
      "max": 2147483647,
      "step": 1,
      "nodeId": "6",
      "fieldPath": "inputs.seed"
    }
  ]
}
